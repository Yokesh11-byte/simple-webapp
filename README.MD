## ğŸŒ Web App ğŸš€ Deployment with Prometheus ğŸ“Š Monitoring on GKE ğŸ› ï¸

#### This guide provides detailed instructions for deploying a ğŸŒ web application along with Prometheus ğŸ“Š monitoring on Google Kubernetes Engine (GKE) ğŸ› ï¸. Deployment is automated using Terraform ğŸ—ï¸ and GitHub Actions ğŸ¤–, ensuring a streamlined CI/CD process.

### ğŸ“‚ Project Directory Overview

### The project structure is organized as follows:

```
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ gke-provisioning.yaml       # ğŸ› ï¸ Workflow for provisioning GKE cluster using Terraform
â”‚       â””â”€â”€ app-deployment.yaml         # ğŸš€ Workflow for deploying the web app and Prometheus
â”œâ”€â”€ manifests/
â”‚   â”œâ”€â”€ webapp-deployment.yaml          # ğŸ“¦ Kubernetes deployment manifest for the web app
â”‚   â”œâ”€â”€ webapp-service.yaml             # ğŸŒ Kubernetes service for exposing the web app
â”œâ”€â”€ monitoring/
â”‚   â”œâ”€â”€ namespace.yaml                  # ğŸ—‚ï¸ Namespace configuration for monitoring
â”‚   â”œâ”€â”€ prometheus-clusterrole.yaml     # ğŸ”‘ Cluster role and permissions for Prometheus
â”‚   â”œâ”€â”€ prometheus-configmap.yaml       # âš™ï¸ Prometheus configuration file
â”‚   â”œâ”€â”€ prometheus-deployment.yaml      # ğŸ“¦ Prometheus deployment manifest
â”‚   â””â”€â”€ prometheus-service.yaml         # ğŸŒ Service manifest for Prometheus
â”œâ”€â”€ terraform/
â”‚   â”œâ”€â”€ main.tf                         # ğŸ—ï¸ Main Terraform configuration for GKE
â”‚   â”œâ”€â”€ variables.tf                    # ğŸ“‹ Input variables for Terraform
â”‚   â”œâ”€â”€ terraform.tfvars                # ğŸ“ Values for Terraform variables
â”‚   â”œâ”€â”€ backend.tf                      # ğŸ—‚ï¸ Backend configuration for state management
â”‚   â””â”€â”€ outputs.tf                      # ğŸ”„ Outputs from the Terraform setup
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.html                      # ğŸŒ Web appâ€™s main HTML file
â”œâ”€â”€ Dockerfile                          # ğŸ³ Dockerfile to containerize the web app
â””â”€â”€ README.md                           # ğŸ“˜ This file
```
## ğŸš€ Deployment Process

### 1ï¸âƒ£ Provision GKE Cluster with Terraform ğŸ—ï¸

Use Terraform ğŸ› ï¸ to provision the necessary infrastructure on Google Cloud â˜ï¸, including:

GKE Cluster: ğŸ› ï¸ Hosts the ğŸŒ web app and Prometheus ğŸ“Š.

Networking: ğŸŒ Sets up the required VPC and subnet configurations.

#### ğŸ“ Terraform Configuration Files:

* main.tf: Core configuration for GKE provisioning.

* variables.tf: Defines variables like project ID and cluster name.

* terraform.tfvars: Provides values for the variables.

* backend.tf: Configures state storage for Terraform.

* outputs.tf: Exposes the GKE cluster details post-provisioning.

#### Run the Terraform provisioning via the gke-provisioning.yaml GitHub Actions workflow ğŸ¤–, which automates the following steps:

* ğŸ”§ Initialize Terraform: terraform init

* ğŸ› ï¸ Plan and apply: terraform apply -auto-approve

### 2ï¸âƒ£ Build and Deploy the Web App ğŸŒ

#### After the GKE cluster is provisioned, deploy the web app ğŸ“¦.

#### ğŸŒ Web App Configuration:

* Dockerfile ğŸ³: Builds a container using the Caddy web server to serve the index.html file from the src/ directory.

##### Kubernetes Manifests ğŸ“‹:

* webapp-deployment.yaml: Deploys the web app as a Kubernetes Deployment.

* webapp-service.yaml: Exposes the web app as a Kubernetes Service.

#### These configurations are applied automatically via the app-deployment.yaml GitHub Actions workflow ğŸ¤–, which:

* ğŸ³ Builds the Docker image.

* ğŸ“¤ Pushes the image to a container registry.

* ğŸ“‹ Applies the Kubernetes manifests using kubectl.

### 3ï¸âƒ£ Configure Prometheus Monitoring ğŸ“Š

#### Deploy Prometheus ğŸ“Š to monitor your GKE cluster and the web app ğŸŒ.

#### ğŸ“‹ Prometheus Configuration:

* Namespace ğŸ—‚ï¸: Defined in namespace.yaml to isolate monitoring resources.

* Cluster Role ğŸ”‘: prometheus-clusterrole.yaml grants Prometheus permissions to scrape Kubernetes metrics.

* ConfigMap âš™ï¸: prometheus-configmap.yaml provides Prometheus scraping configurations.

* Deployment ğŸ“¦: prometheus-deployment.yaml manages Prometheus pods.

* Service ğŸŒ: prometheus-service.yaml exposes Prometheus externally for accessing its dashboard.

#### The deployment is automated in the app-deployment.yaml workflow ğŸ¤–.

### 4ï¸âƒ£ Access Prometheus Dashboard ğŸŒ

#### Once deployed, Prometheus ğŸ“Š can be accessed via its external IP address.

#### ğŸ“¤ Retrieve the external IP of the Prometheus service:

kubectl get svc -n monitoring

#### ğŸŒ Open your browser and navigate to http://<PROMETHEUS_EXTERNAL_IP>:9090.

#### ğŸ¤– CI/CD Automation

#### GitHub Actions Workflows ğŸ¤–:

#### gke-provisioning.yaml:

* Automates Terraform ğŸ› ï¸ provisioning of the GKE cluster.

* Runs on pushes to the main branch or manual triggers.

#### app-deployment.yaml:

* ğŸ³ Builds the Docker image and deploys the app and Prometheus ğŸ“Š.

* Executes on updates to application code or Kubernetes manifests ğŸ“‹.

### ğŸ”„ Continuous Deployment:

#### Any changes pushed to the repository ğŸ“¤ are automatically deployed, ensuring up-to-date infrastructure and applications.

#### ğŸ“ Summary

##### This project demonstrates:

* ğŸ› ï¸ Automated infrastructure provisioning with Terraform.

* ğŸŒ Web app deployment with Kubernetes.

* ğŸ“Š Real-time monitoring using Prometheus.

* ğŸ¤– Streamlined CI/CD pipelines with GitHub Actions.

### By following this guide, you can ensure reliable deployment and monitoring of your ğŸŒ web application on GKE â˜ï¸.